
## Testing

``` sh
pytest --color=yes
```


## To build and deploy
There are two steps - building an artifact and deploying it to AWS.
Building the artifact happens first in a separate step, because we need to 
install specific libraries that are compatible with AWS's Lambda runners.

From the root directory

``` sh
./bin/build-aws-artifact.sh

cd iac
terraform apply
```

## Manual testing
Navigate to the AWS Lambda that's been set up and go to the "Test" section.

Use the `apigateway-authorizer` template and replace the `authorizationToken`
with one that has been generated by the keycloak.andrewslai.com Identity
provider. This token is sent with all requests to the kaleidoscope backend, and
can be sniffed from network requests at `andrewslai.com`.

# Notes
Docs for PyJWT
https://pyjwt.readthedocs.io/en/latest/usage.html

Generating test RSA keys
https://gist.github.com/ygotthilf/baa58da5c3dd1f69fae9

Need to install the correct version of Cryptography because only a specific version is compatible with AWS
https://github.com/pyca/cryptography/issues/6391#issue-1020088939
